<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>LOGIN FORM</title>
  <link rel="stylesheet" href="{{url_for('static',filename='style.css')}}">

</head>
<body>
<!-- partial:index.partial.html -->
<div class="wrapper">

  <div class="login-box">
    <form id="loginForm">
      <h2>Login</h2>

      <div class="input-box">
        <span class="icon">
          <ion-icon name="person"></ion-icon>
        </span>
        <input type="text" id="name" name="Name" required>
        <label>Name</label>
      </div>

      <div class="input-box">
        <span class="icon">
          <ion-icon name="card"></ion-icon>
        </span>
        <input type="number" pattern="[0-9]{12}" id="aadhar" name="aadhar" required>
        <label>Aadhar Number</label>
      </div>

      <div class="input-box">
        <span class="icon">
          <ion-icon name="call"></ion-icon>
        </span>
        <input type="text" id="mobile" name="mobile" required>
        <label>Mobile Number</label>
      </div>

      <button type="submit">Login</button>

      <div class="register-link">
        <p>Don't have an account? <a href="/index">Register</a></p>
      </div>
    </form>
  </div>

</div>
<!-- partial -->

<script src='https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js'></script>
<script src='https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js'></script>
<script>
  document.getElementById("loginForm").addEventListener("submit", function(event) {
    event.preventDefault();
    
    // Here you can add your login logic
    // For simplicity, let's just simulate generating and verifying OTP
    
    // Generate OTP
    var otp = Math.floor(1000 + Math.random() * 9000); // Generate a 4-digit random number
    
    // Simulate sending OTP to the provided mobile number (in real-world scenario, this would be sent via SMS)
    var mobileNumber = document.getElementById("mobile").value;
    alert("OTP sent to " + mobileNumber + ": " + otp);
    
    // Prompt user to enter OTP
    var userOTP = prompt("Enter OTP sent to your mobile number:");
    
    // Verify OTP
    if (userOTP === otp.toString()) {
      alert("OTP verified. Login successful!");
      location.replace('/logindashboard?aadhar='+document.getElementById('aadhar').value+'&mobile='+document.getElementById('mobile').value);
    } else {
      alert("OTP verification failed. Please try again.");
    }
  });
</script>
</body>
</html>
